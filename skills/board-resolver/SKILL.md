---
name: board-resolver
description: Mattermost Boards 이슈 URL을 받아 자동으로 이슈를 분석하고 코드베이스에서 원인을 파악하여 해결방안을 제시한다. /board-resolver <mattermost-boards-url> 형식으로 호출한다. 버그 수정, 기능 개선, 장애 해결 등 이슈 트래킹 시스템과 연동된 개발 작업에 사용한다.
---

# Board Resolver

Mattermost Boards 이슈를 자동으로 분석하고 해결하는 워크플로우.

## 워크플로우 개요

```
┌─────────────────────────────────────────────────────────────┐
│                    Phase 1: 이슈 정보 수집                    │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                   Phase 2: 코드베이스 분석                    │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│              Phase 3: 정보 충분성 검증 (반복 루프)             │
│  ┌─────────────────────────────────────────────────────┐    │
│  │  정보 부족?  ──YES──→  사용자에게 질문/정책 요청      │    │
│  │      ↑                         ↓                    │    │
│  │      └─────────  피드백 수집 ←──┘                    │    │
│  │                                                     │    │
│  │  정보 충분?  ──YES──→  Phase 4로 진행               │    │
│  └─────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                Phase 4: 해결방안 도출 및 점수화                │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                  Phase 5: 해결방안 제시 및 선택                │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                 Phase 6: 구현, 테스트, 리팩토링                │
└─────────────────────────────────────────────────────────────┘
```

## Phase 1: 이슈 정보 수집

1. URL에서 보드/카드 정보 추출
2. `mattermost_cli.py board-card --card-url <URL>` 실행
3. 카드 제목, 설명, 속성값, 첨부 콘텐츠 파싱
4. 수집된 이슈 정보 요약하여 사용자에게 확인

## Phase 2: 코드베이스 분석

1. 이슈 키워드 추출 (에러 메시지, 기능명, 파일명 등)
2. Grep/Glob으로 관련 코드 검색
3. 의존성 및 호출 관계 분석
4. 영향 범위 파악

## Phase 3: 정보 충분성 검증 (반복 루프)

**이 단계는 필요한 정보가 모두 수집될 때까지 반복한다.**

### 3.1 정보 충분성 체크리스트

분석 전 다음 항목 확인:

| 카테고리 | 필요 정보 | 확인 방법 |
|----------|-----------|-----------|
| 재현 조건 | 이슈 발생 시나리오 | 보드 카드 내용 또는 사용자 확인 |
| 환경 정보 | 개발/스테이징/운영 환경 | 사용자 확인 |
| 우선순위 | 긴급도, 영향 범위 | 보드 속성 또는 사용자 확인 |
| 제약 조건 | 수정 불가 영역, 의존성 제약 | 사용자 확인 |
| 비즈니스 정책 | 도메인 규칙, 예외 케이스 | 사용자 확인 |
| 기술 정책 | 코딩 컨벤션, 아키텍처 원칙 | 프로젝트 문서 또는 사용자 확인 |

### 3.2 정보 부족 시 질문 생성

다음 형식으로 사용자에게 질문:

```
## 추가 정보 요청

해결방안을 정확히 도출하기 위해 다음 정보가 필요합니다:

### 필수 정보
1. [질문 1] - 필요 이유: [이유]
2. [질문 2] - 필요 이유: [이유]

### 선택 정보 (있으면 도움됨)
3. [질문 3] - 필요 이유: [이유]

위 정보를 제공해 주시면 더 정확한 해결방안을 제시할 수 있습니다.
```

### 3.3 피드백 수집 및 재분석

1. 사용자 응답 수집
2. 새로운 정보를 기반으로 코드베이스 재분석
3. 정보 충분성 재검증
4. **부족하면 3.2로 돌아가 반복**

### 3.4 정보 충분 판단 기준

다음 조건 모두 충족 시 Phase 4로 진행:
- 이슈 재현 조건 파악 완료
- 관련 코드 위치 특정 완료
- 수정 제약 조건 파악 완료
- 비즈니스/기술 정책 확인 완료 (해당 시)

## Phase 4: 해결방안 도출 및 점수화

### 4.1 원인 분석

- 직접 원인 vs 근본 원인 구분
- 재현 조건과 코드 매핑
- 영향 범위 (단일 파일/모듈/시스템)

### 4.2 해결방안 점수 산정

| 항목 | 가중치 | 설명 |
|------|--------|------|
| 원인 적합도 | 40% | 분석된 원인과의 직접 연관성 |
| 구현 복잡도 | 25% | 수정 범위 (낮을수록 높음) |
| 부작용 위험 | 20% | 다른 기능 영향 (낮을수록 높음) |
| 테스트 용이성 | 15% | 검증 가능성 |

### 4.3 사용자 피드백 반영

수집된 정책/정보를 점수 산정에 반영:
- 제약 조건 위반 시 해당 방안 제외
- 우선순위에 따라 가중치 조정
- 비즈니스 정책 준수 여부 확인

## Phase 5: 해결방안 제시

적합도 점수 순으로 해결방안 제시:

```
## 해결방안 #1 (적합도: 92점)

### 원인
[원인 설명]

### 수정 내용
[파일:라인 → 변경 내용]

### 예상 영향
[영향 범위]

### 위험 요소
[잠재적 문제점]

### 반영된 정책/제약
- [사용자가 제공한 정책 1]
- [사용자가 제공한 제약 조건 1]

---

## 해결방안 #2 (적합도: 78점)
...
```

사용자가 해결방안 선택 후 Phase 6으로 진행.

## Phase 6: 구현, 테스트, 리팩토링

### 6.1 구현
1. 선택된 해결방안 적용
2. 수정 전후 diff 제시

### 6.2 테스트
1. 관련 테스트 코드 작성/수정
2. 빌드 및 테스트 실행
3. 결과 검증

### 6.3 리팩토링 (선택)
테스트 통과 후:
1. 중복 코드 제거
2. 네이밍 개선
3. 주석/문서 업데이트
4. 최종 결과 제시

## 사용 예시

```
/board-resolver https://mattermost.gabia.com/boards/team/xxx/board/view/card
```

## 참고

- references/analysis-patterns.md: 상세 분석 패턴 및 휴리스틱
